{% extends 'base.html' %}

{% block content %}
  {% if current_user['id'] == recipe['user_id'] %}
    <header>
      <h1 class="title">Recipes</h1> 
      <section class="controls">
        <a href="/recipes" class="button">Go to homepage</a>
        <a href="/recipes/new" class="button">Add recipe</a>
        <form action="/sessions/delete" method="POST" class="button">
          <button>Log out</button>
        </form>
      </section>
    </header>

    <main>
      <section class="recipesmain">
        <section class="recipemain">

          <header claas="individualrecipe">
            <a href="/sessions/page/{{ recipe['id'] }}"><h2 class="main">{{ recipe['title'] }}</h2></a>
            <section class="controls">
              <a href="/recipes/{{ recipe['id'] }}/edit" class="button">Edit</a>
              <form action="/recipes/{{ recipe['id'] }}/delete" method= "POST">
                <button>Delete</button>
              </form>
            </section>
          </header>

          <img src="{{ recipe['image_url'] }}" alt="" class="main">
        
          <p class="subheading">Ingredients:</p>
          <p>{{ recipe['ingredients'] }}</p>
          <br>
          <p class="subheading">Instructions:</p>
          <p>{{ recipe['recipe'] }}</p>

          <section class="comment-area">
            <section class="likebar">
              <section class="like">
                <form action="/recipes/{{ recipe['id'] }}/likes" method="POST">
                  <button> {{ likes_count['count'] }} Like</button>
                </form>
              </section>
            </section>

            <section class="comment-input">
              <section class="comment">
                <form action="/recipes/{{ recipe['id'] }}/comment" method="POST">
                  <textarea class="textarea" placeholder="Comments..." name="comment-output" cols="50" rows="5" required></textarea>
                  <button>comments</button>
                </form>
              </section> 
            </section>

            <section class="comment">
            {% for comment in comments %}
              <section class="comments">
                <p>{{ comment['comment'] }}</p>
              </section>
            {% endfor %}
            </section>

          </section>
        </section>
      </section> 
    </main>

  {% elif current_user %}
    <header>
      <h1 class="title">Recipes</h1> 
      <section class="controls">
        <a href="/recipes" class="button">Go to homepage</a>
        <a href="/recipes/new" class="button">Add recipe</a>
        <form action="/sessions/delete" method="POST" class="button">
          <button>Log out</button>
        </form>
      </section>
    </header>

    <main>
      <section class="recipesmain">
        <section class="recipemain">
          <header claas="individualrecipe">
            <a href="/sessions/page/{{ recipe['id'] }}"><h2 class="main">{{ recipe['title'] }}</h2></a>
          </header>
          <img src="{{ recipe['image_url'] }}" alt="" class="main">
      
          <p class="subheading">Ingredients:</p>
          <p>{{ recipe['ingredients'] }}</p>
          <br>
          <p class="subheading">Instructions:</p>
          <p>{{ recipe['recipe'] }}</p>

          <section class="comment-area">
            <section class="likebar">
              <section class="like">
                <form action="/recipes/{{ recipe['id'] }}/likes" method="POST">
                  <button> {{ likes_count['count'] }} Like</button>
                </form>
              </section>
            </section>

            <section class="comment-input">
              <section class="comment">
                <form action="/recipes/{{ recipe['id'] }}/comment" method="POST">
                  <textarea class="textarea" placeholder="Comments..." name="comment-output" cols="50" rows="5" required></textarea>
                    <button>comments</button>
                </form>
              </section>  
            </section>

            <section class="comment">
            {% for comment in comments %}
              <section class="comments">
              <p>{{ comment['comment'] }}</p>
              </section>
            {% endfor %}
            </section>

          </section>
        </section>
      </section>    
    </main>

  {% else %}
    <header>
      <h1 class="title">Recipes</h1> 
      <a href="/recipes" class="button">Go to homepage</a>
    </header>

    <main>
      <section class="recipesmain">
        <section class="recipemain">
          <header claas="individualrecipe">
            <a href="/sessions/page/{{ recipe['id'] }}"><h2 class="main">{{ recipe['title'] }}</h2></a>
          </header>
          <img src="{{ recipe['image_url'] }}" alt="" class="main">
        
          <p class="subheading">Ingredients:</p>
          <p>{{ recipe['ingredients'] }}</p>
          <br>
          <p class="subheading">Instructions:</p>
          <p>{{ recipe['recipe'] }}</p>
          
          <section class="comment-area">
            <section class="comment">
            {% for comment in comments %}
              <section class="comments">
                <p>{{ comment['comment'] }}</p>
              </section>
            {% endfor %}
            </section>
          </section>
          
        </section>
      </section>    
    </main>
  {% endif %}
  

  <footer>
    <p>Copyrights @ 2023</p>
  </footer>

{% endblock %}
